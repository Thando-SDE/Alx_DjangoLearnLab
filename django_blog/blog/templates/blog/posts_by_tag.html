{% extends "blog/base.html" %}
{% block title %}Posts tagged with "{{ tag }}"{% endblock %}
{% block content %}
<h1>Posts tagged with: <span class="tag-highlight">{{ tag }}</span></h1>

<div class="search-info mb-4">
    <p>Found {{ total_results }} post{{ total_results|pluralize }} with this tag.</p>
</div>

{% if posts %}
    {% for post in posts %}
        <div class="post-card">
            <h2><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h2>
            <p class="text-muted">
                By {{ post.author.username }} | 
                Posted on {{ post.date_posted|date:"F d, Y" }}
            </p>
            
            <!-- Display tags -->
            {% if post.tags.all %}
                <div class="tags mb-2">
                    {% for tag in post.tags.all %}
                        <a href="{% url 'posts-by-tag' tag.name %}" class="tag-badge">{{ tag.name }}</a>
                    {% endfor %}
                </div>
            {% endif %}
            
            <p>{{ post.snippet }}</p>
            <hr>
        </div>
    {% endfor %}
{% else %}
    <div class="alert alert-warning">
        <p>No posts found with this tag.</p>
        <p>Browse <a href="{% url 'post-list' %}">all posts</a> instead.</p>
    </div>
{% endif %}

<div class="mt-4">
    <a href="{% url 'post-list' %}">← Back to all posts</a> | 
    <a href="{% url 'home' %}">← Back to home</a>
</div>
{% endblock %}
